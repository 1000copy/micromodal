<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Micromodal</title>
  <link rel="stylesheet" href="../example/tachyons.css">
  <link rel="stylesheet" href="../example/prism.css">
  <link rel="stylesheet" href="../example/style.css">
</head>
<body class="sans-serif bg-white-20 bt bw2">

  <div class="mw7 center cf">

    <header class="mt5">
      <div class="logo">
        <span class="logo__mark bg-black"></span>
        <!-- <span class="logo__text">Micromodal.js</span> -->
      </div>
    </header>

    <main class="cf mt4 mb5 flex">

      <aside class="fl w-25">
        <ul class="list pl0 sticky">
          <li class="lh-copy pv1">
            <a href="#introduction" class="link black-70 blue fw6 active navlink">Introduction</a>
          </li>
          <li class="lh-copy pv1">
            <a href="#installation" class="link black-70 navlink">Installation</a>
          </li>
          <li class="lh-copy pv1">
            <a href="#usage" class="link black-70 navlink">Usage</a>
          </li>
          <li class="lh-copy pv1">
            <a href="#styling" class="link black-70 navlink">Styling</a>
          </li>
        </ul>
      </aside>

      <article class="fl w-75 dark-gray pl5">
        <h1 class="f3 fw6 lh-title mb4 black heading" id="introduction">
          Introduction
        </h1>

        <h3 class="f4 fw4 lh-copy mv4 black-80">
          <strong>Micromodal.js</strong> is a modern, lightweight (1.6kb), dependency-free library for creating <em>accessible</em> modal dialogs.
        </h3>

        <p class="lh-copy mv4 black-80">
          It enables you to create <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#dialog_modal" target="_blank" class="blue underline dim">WAI-ARIA guidelines</a> compliant modal dialogs, with confidence. Designed to be easy to use, it does most of the heavy lifting behind the scenes and exposes a simple api to interact with the dom.
        </p>


        <div class="bg-washed-green tc">
          <div class="mv5 dib">

            <button class="f6 grow no-underline br2 ph4 pv3 dib white bg-dark-green bn"  data-micromodal-trigger="modal-1">
              Demo Modal
            </button>

          </div>
        </div>

        <p class="lh-copy mv4 black-80">
          Following are some of the interactions handled by the library:-
        </p>

        <ul class="lh-copy checkmark pl0 mv4">
          <li class="mv1">Closing modal on overlay click</li>
          <li class="mv1">Closing modal on <code>esc</code> button press</li>
          <li class="mv1">Toggling <code>aria-hidden</code> attribute on modal</li>
          <li class="mv1">Trapping tab focus within the modal</li>
          <li class="mv1">Maintaining focus position before and after toggling modal</li>
          <li class="mv1">Focusing on the first focusable element within the modal</li>
        </ul>



        <h2 class="f3 fw6 lh-title mt5 mb4 black heading" id="installation">
          Installation
        </h2>

        <p class="lh-copy mv4 black-80">
          Micromodal is available on <code>npm</code> and can be installed from the command line via npm or yarn
        </p>

        <pre><code class="language-js">
npm install micromodal --save // via npm
yarn add micromodal --save // via yarn
        </code></pre>

        <p class="lh-copy mv4 black-80">
          You can also download or link to the latest compiled version using the CDN.
        </p>

        <pre><code class="language-js">
https://unpkg.com/micromodal/dist/micromodal.min.js
        </code></pre>



        <h2 class="f3 fw6 lh-title mt5 mb4 black heading" id="usage">
          Usage
        </h2>

        <p class="lh-copy mv4 black-80">
          Typically modals have an overlay which cover the rest of the content. To achieve this, it is normal to put the modal code just before the closing <code>body</code> tag, so that the modal overlay is relative to the body and covers the whole screen.
        </p>

        <h3 class="f4 fw6 mv4">
          1. Add the modal markup
        </h3>

        <p class="lh-copy mv4 black-80">
          The following html structure is expected for the modal to work. It can of course be extended to suit your needs. As an example of the customization, see the source code of the demo modal <a href="#" target="_blank" class="blue underline dim">here</a>.
        </p>

        <pre data-line="3" ><code class="language-html">
&lt;!-- [1] --&gt;
&lt;div id=&quot;modal-1&quot; aria-hidden=&quot;true&quot;&gt;

  &lt;!-- [2] --&gt;
  &lt;div tabindex=&quot;-1&quot; data-micromodal-close&gt;

    &lt;!-- [3] --&gt;
    &lt;div role=&quot;dialog&quot; aria-modal=&quot;true&quot; aria-labelledby=&quot;modal-1-title&quot; aria-describedby=&quot;modal-1-content&quot;&gt;

      &lt;!-- [4] --&gt;
      &lt;div role=&quot;document&quot;&gt;

        &lt;header&gt;
          &lt;h3 id=&quot;modal-1-title&quot;&gt;
            Modal Title
          &lt;/h3&gt;

          &lt;!-- [5] --&gt;
          &lt;button aria-label=&quot;Close modal&quot; aria-controls=&quot;modal-1&quot; data-micromodal-close&gt;&lt;/button&gt;
        &lt;/header&gt;

        &lt;main id=&quot;modal-1-content&quot;&gt;
          Modal Content
        &lt;/main&gt;

      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
        </code></pre>

        <ul class="ordered lh-copy pl0 mv4">
          <ol class="pl4 pv3">
            This is the outermost container of the modal. It's job is to toggle the display of the modal. It is important that every modal have a unique <code>id</code>. By default the <code>aria-hidden</code> will be <code>true</code>. Micromodal takes care of toggling the value when required.
          </ol>
          <ol class="pl4 pv3">
            This is the <code>div</code> which acts as the overlay for the modal. Notice the <code>data-micromodal-close</code> on it. This is a special attribute which indicates that the element that it is on should trigger the close of the modal on click. If we remove that attribute, clicking on the overlay will not close the modal anymore.
          </ol>
          <ol class="pl4 pv3">
            The <code>role="dialog"</code> attribute is used to inform assistive technologies that content within is separate from the rest of the page. Additionally, the <code>aria-labelledby="modal-1-title"</code> attribute points to the <code>id</code> of the modal title. This is to help identify the purpose of the modal. Similarly, the <code>aria-describedby</code> points to the <code>id</code> of the modal content element.
          </ol>
          <ol class="pl4 pv3">
            The wrapper with the <code>role="document</code> is not required to be present but is recommended. It helps inform screen-readers and other assistive technologies about a separate document context within the modal.
          </ol>
          <ol class="pl4 pv3">
            Ensuring that all buttons have a <code>aria-label</code> attribute which defines the action of the button. Notice the <code>data-micromodal-close</code> attribute is used on the button since we want to close the modal on press.
          </ol>
        </ul>



        <h3 class="f4 fw6 mv4">
          2. Add micromodal.js
        </h3>

        <p class="lh-copy mv4 black-80">
          If you included the compiled file from the CDN into your project, you will have access to a <code>MicroModal</code> global variable, which you can use to instantiate the module.
        </p>

        <p class="lh-copy mv4 black-80">
          In cases with a modular workflow, you can directly import the module into your project.
        </p>

        <pre><code class="language-js">
import MicroModal from 'micromodal';  // es6 module
var MicroModal = require('micromodal'); // commonjs module
        </code></pre>

        <h3 class="f4 fw6 mv4">
          3. Use with data attributes
        </h3>

        <p class="lh-copy mv4 black-80">
          Set <code>data-micromodal-trigger="modal-1"</code> on an element, like a button or link, on whose click you want to show the modal. The value of the attribute, in this case <code>modal-1</code> should correspond to the <code>id</code> of the modal you want to toggle.
        </p>

        <p class="lh-copy mv4 black-80">
          Then instantiate the <code>MicroModal</code> module, so that it takes care of all the bindings for you.
        </p>

        <pre><code class="language-js">
MicroModal.init();
        </code></pre>


        <p class="lh-copy mv4 black-80">
          Example:-
        </p>

        <div class="bg-washed-green tc">
          <div class="mv5 dib">

            <a class="f5 fw6 db dark-green no-underline underline-hover" href="#0" data-micromodal-trigger="modal-1">
              Trigger Modal
            </a>

          </div>
        </div>


        <p class="lh-copy mv4 black-80">
          The <code>init</code> method also accepts and optional configuration object. This can be used to pass hooks to be executed on the modal open and modal close events. Example:-
        </p>

        <pre><code class="language-js">
MicroModal.init({
  onClose: modal => console.info(`${modal.id} is hidden`), // [1]
  onShow: modal => console.info(`${modal.id} is shown`) // [2]
});
        </code></pre>

        <ul class="ordered lh-copy pl0 mv4">
          <ol class="pl4 pv3">
            <code>onShow {Function}</code> This is fired when the modal is opening. The function receives the modal object as the first parameter.
          </ol>
          <ol class="pl4 pv3">
            <code>onClose {Function}</code> This is fired when the modal is closing. The function receives the modal object as the first parameter.
          </ol>
        </ul>

        <h3 class="f4 fw6 mv4">
          4. Use with javascript
        </h3>

        <p class="lh-copy mv4 black-80">
          You can also trigger modals programmatically using the <code>show</code> method on the <code>MicroModal</code> object. Example:-
        </p>

        <pre><code class="language-js">
MicroModal.show('modal3'); // [1]
        </code></pre>

        <ul class="ordered lh-copy pl0 mv4">
          <ol class="pl4 pv3">
            The string passed to the <code>show</code> method must correspond to the <code>id</code> of the modal to be toggled
          </ol>
        </ul>


        <h2 class="f3 fw6 lh-title mt5 mb4 black heading" id="styling">
          Styling
        </h2>

        <p class="lh-copy mv4 black-80">
          Micromodal does not make any stylistic choices about your modal and hence comes with no styling at all. It does not even toggle the visibility of the modal. You are free to style the modal in anyway you wish.
        </p>

        <p class="lh-copy mv4 black-80">
          At the very least, we recommend the following bit of <code>css</code> to toggle the modal.
        </p>

        <pre><code class="language-css">
.modal[aria-hidden='true'] {
  display: none;
}
        </code></pre>

        <p class="lh-copy mv4 black-80">
          In case you do want some default styles to get started quickly, you can refer to the styles and the corresponding markup of the demo modal <a href="$" target="_blank" class="blue underline dim">here.</a>
        </p>
      </article>
    </main>


    <footer class="mv6 tc">
      <p>🤘</p>
      <div class="mt3">
        <p class="f6 dib pl2 mid-gray">Built by <a href="https://twitter.com/knowkalpesh" title="Kalpesh's twitter handle" class="f6 dib blue no-underline underline-hover">@knowkalpesh</a> and <a href="https://twitter.com/_ighosh" title="Ghosh's twitter handle" class="f6 dib blue no-underline underline-hover">@ghosh</a></p>
      </div>
    </footer>

  </div>


  <div class="modal micromodal-bounce" id="modal-1" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
      <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title" aria-describedby="modal-1-content">
        <div role="document">
          <header class="modal__header">
            <h3 class="modal__title mv0 f4 fw6 lh-title dark-blue" id="modal-1-title">
              Micromodal
            </h3>
            <button class="modal__close" aria-label="Close modal" aria-controls="modal__container1" data-micromodal-close></button>
          </header>
          <main class="modal__content" id="modal-1-content">
            <p class="lh-copy mv4 black-80">
              Try hitting the <code>tab</code> key and notice how the focus stays within the modal itself. Also, <code>esc</code> to close modal.
            </p>
          </main>
          <footer class="modal__footer">
            <button class="f6 br2 ph3 pv2 grow white bg-dark-blue bn">Continue</button>
            <button class="f6 br2 ph3 pv2 grow black bg-black-10 bn" data-micromodal-close aria-label="Close this dialog window">Close</button>
          </footer>
        </div>
      </div>
    </div>
  </div>


  <script src="../dist/micromodal.js"></script>
  <script src="../example/prism.js"></script>
  <script>

    // MicroModal.show('modal3');
    // MicroModal.init();
    MicroModal.init({
      onClose: modal => console.info(`${modal.id} is hidden`),
      onShow: modal => console.info(`${modal.id} is shown`)
    });



    var section = document.querySelectorAll(".heading");
    var sections = {};

    Array.prototype.forEach.call(section, function(e) {
      sections[e.id] = e.offsetTop;
    });

    window.onscroll = function() {
      var scrollPosition = document.documentElement.scrollTop || document.body.scrollTop;

      for (i in sections) {
        if (sections[i] <= scrollPosition) {
          document.querySelector('.active').classList.remove('blue', 'fw6', 'active');
          document.querySelector('a[href*=' + i + ']').classList.add('blue', 'fw6', 'active');
        }
      }
    };


  </script>
</body>
</html>
